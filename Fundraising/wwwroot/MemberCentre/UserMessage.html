<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./message.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
      crossorigin="anonymous"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.2/axios.min.js"
      integrity="sha512-QTnb9BQkG4fBYIt9JGvYmxPpd6TBeKp6lsUrtiVQsrJ9sb33Bn9s0wMQO9qVBFbPX3xHRAsBHvXlcsrnJjExjg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
      .card {
        box-shadow: 0 1px 2px 0 rgb(0 0 0 / 10%);
        width: 80%;
        transition: 0.5s;
        border: 0;
        border-radius: 0.55rem;
        position: relative;
      }
    </style>
    <title>聯絡訊息</title>
  </head>
  <body>
    <div class="container" id="app">
      <!-- 標題 -->
      <div class="mx-auto" style="width: 80%">
        <h5 class="ms-4 mt-3">聯絡訊息</h5>
      </div>

      <div class="clearfix mx-auto card my-3">
        <div class="mt-3">
          <div class="chat-app mx-auto">
            <!-- 對象(左) -->
            <div id="plist" class="people-list">
              <!-- 搜尋input -->
              <div class="input-group">
                <span class="input-group-text"> 搜尋 </span>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Search..."
                />
              </div>

              <!-- 訊息對象 -->
              <ul class="list-unstyled chat-list mt-2 mb-0">
                <li class="clearfix shadow-sm my-1 border">
                  <img
                    src="https://bootdey.com/img/Content/avatar/avatar1.png"
                    alt="avatar"
                  />
                  <div class="about">
                    <div class="name">史蒂夫</div>
                    <div class="status">
                      <p>30分鐘前</p>
                    </div>
                  </div>
                </li>
                <li class="clearfix shadow-sm my-1 border chatting">
                  <img src="../img/PersonalPhoto.jpg" alt="avatar" />
                  <div class="about">
                    <div class="name">戴夫</div>
                    <div class="status">
                      <p>1天前</p>
                    </div>
                  </div>
                </li>
                <li class="clearfix shadow-sm my-1 border">
                  <img
                    src="https://bootdey.com/img/Content/avatar/avatar3.png"
                    alt="avatar"
                  />
                  <div class="about">
                    <div class="name">蒙其．Ｄ．喬瑟夫</div>
                    <div class="status">
                      <p>3天前</p>
                    </div>
                  </div>
                </li>
              </ul>
            </div>

            <!-- 聊天(右) -->
            <div class="chat">
              <!-- 目前對話對象(標題) -->
              <div class="chat-header clearfix mt-2">
                <a href="#" data-toggle="modal" data-target="#view_info">
                  <img
                    class="img-"
                    src="../img/PersonalPhoto.jpg"
                    alt="avatar"
                  />
                </a>
                <div class="chat-about">
                  <h6 class="m-b-0">戴夫</h6>
                  <small>上次訊息: 2022-12-29 22:38</small>
                </div>
              </div>

              <!-- 聊天記錄 -->
              <div class="chat-history">
                <ul class="m-b-0">
                  <!-- 每一筆聊天 -->
                  <li class="clearfix" v-for="item in messages">
                    <!-- 判斷為誰發送 -->
                    <div v-if="item.fromUserId==msg.fromUserId">
                      <div class="message-data text-end">
                        <span class="message-data-time">10:12 AM, 今天</span>
                      </div>
                      <div class="message other-message float-right shadow-sm">
                        {{item.contact}}
                      </div>
                    </div>
                    <div v-else>
                      <div class="message-data">
                        <span class="message-data-time">10:12 AM, 今天</span>
                      </div>
                      <div class="message my-message shadow-sm">
                        {{item.contact}}
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="chat-message clearfix">
                <div class="input-group mb-0">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="輸入訊息"
                    v-model="msg.contact"
                    id="message-input"
                  />
                  <button
                    @click="sendToUser"
                    class="btn btn-secondary input-group-text"
                  >
                    發送
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
      crossorigin="anonymous"
    ></script>
    <script src="../layout/membercentre_layout.js"></script>
    <script src="../lib/microsoft/signalr/dist/browser/signalr.js"></script>
    <script src="./Js_src/message.js"></script>
  </body>
</html>
